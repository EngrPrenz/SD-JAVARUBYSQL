<h2>Products</h2>

<form method="get" action="/products" class="search-bar">
  <div class="field">
    <label>Search by name</label>
    <input name="q" value="<%= @q %>" placeholder="type product name..." />
  </div>
  <button type="submit">Search</button>
  <a href="/products">Clear</a>
</form>

<a href="/products/new" class="add-link">+ Add New Product</a>

<table>
  <tr>
    <th>ID</th>
    <th>Name</th>
    <th>Price</th>
    <th>Qty</th>
    <th>Actions</th>
  </tr>
  <% @products.each do |p| %>
    <tr>
      <td><%= p[:id] %></td>
      <td><%= p[:name] %></td>
      <td><%= sprintf("%.2f", p[:price]) %></td>
      <td><%= p[:qty] %></td>
      <td>
        <a href="/products/<%= p[:id] %>/edit">Edit</a>
        &nbsp;
        <form class="inline" method="post" action="/products/<%= p[:id] %>/delete" onsubmit="return confirm('Delete this product?')">
          <button type="submit">Delete</button>
        </form>
      </td>
    </tr>
  <% end %>
</table>
